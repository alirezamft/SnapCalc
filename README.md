# SnapCalc (Snapp Rides Calculator)

محاسبه‌گر ساده‌ای که **جمع هزینه‌ی سفرهای اسنپ** رو حساب می‌کنه و نشون می‌ده اگر همون زمان، معادل هر سفر رو **سرمایه‌گذاری در USDT/BTC** کرده بودی، الان چه اندوخته و ارزشی داشتی.  
خروجی رو به‌صورت **کارت تصویری** می‌سازه و می‌تونی نتیجه رو مستقیم **روی X (توییتر)** به اشتراک بذاری.

## ویژگی‌ها
- جمع هزینه‌های سفرهای تکمیل‌شده‌ی اسنپ (IRT → تومان)
- محاسبه‌ی سناریوی سرمایه‌گذاری هم‌زمان در **USDT** و **BTC**
- نمایش درصد سود/زیان نسبت به اصل سرمایه
- نمودار مقایسه‌ی رشد تجمعی (تومان / تتر / بیت‌کوین)
- ذخیره‌ی تصویر خروجی و اشتراک‌گذاری متن در X

---

## نصب و راه‌اندازی (قدم‌به‌قدم)

### ۱) دانلود از GitHub
1. در صفحهٔ ریپازیتوری، روی دکمهٔ **Code** کلیک کنید.
2. گزینهٔ **Download ZIP** را بزنید تا فایل فشرده دانلود شود.

> اگر با Git آشنا هستید، می‌توانید به‌جایش از `git clone` هم استفاده کنید.

### ۲) از حالت فشرده خارج کنید (Extract)
- فایل دانلودی (مثلاً `SnapCalc.zip`) را **Extract** کنید تا یک پوشه مثل `SnapCalc/` داشته باشید.
- داخل این پوشه فایل‌هایی مثل `manifest.json`, `content.js`, `ui-skin.js`, `usd-calc.js`, `btc-calc.js`, `price-provider.js`, `background.js` و… را می‌بینید.

### ۳) بارگذاری افزونه در Chrome/Edge
> این روش برای **Chrome** و **Microsoft Edge** یکی است.

1. مرورگر را باز کنید و به آدرس:  
   `chrome://extensions` (در Edge: `edge://extensions`) بروید.
2. بالای صفحه، **Developer mode / حالت توسعه‌دهنده** را روشن کنید.
3. روی **Load unpacked** (بارگذاری افزونهٔ از حالت فشرده خارج شده) کلیک کنید.
4. پوشهٔ **Extract شده**‌ی افزونه (همان پوشه‌ای که `manifest.json` داخلش است) را انتخاب کنید.
5. افزونه باید در لیست اکستنشن‌ها با وضعیت **Enabled** ظاهر شود.

> اگر دکمهٔ «Load unpacked» را نمی‌بینید، اول «Developer mode» را روشن کنید.

---

## استفاده
1. به سایت **اسنپ** بروید: `https://app.snapp.taxi/`
2. وارد حساب‌تان شوید و **تاریخچهٔ سفرها** را باز کنید.
3. یک دکمه/شناور با عنوان **«محاسبه گر»** (FAB) می‌بینید؛ روی آن کلیک کنید تا **پنجرهٔ ابزار** باز شود.
4. روی **شروع محاسبه** بزنید؛ افزونه سفرها را می‌خواند و نتایج را نشان می‌دهد:
   - **جمع هزینه‌ها** (تومان)
   - **اندوخته امروز** (USDT/BTC)
   - **ارزش امروز** (تومان) + درصد سود/زیان
   - **نمودار مقایسه‌ای**
5. می‌توانید:
   - با دکمهٔ **ذخیره تصویر**، خروجی را به‌صورت PNG/JPG ذخیره کنید.
   - با دکمهٔ **اشتراک‌گذاری**، متن خلاصه را در **X (توییتر)** باز کنید.

> نکته: برای نمایش بهتر فونت‌ها، توصیه می‌شود اینترنت‌تان موقع ذخیرهٔ تصویر وصل باشد تا فونت YekanX از CDN لود شود.

---

## دسترسی‌ها (Permissions)
- `activeTab`, `tabs`: تعامل با صفحهٔ اسنپ
- `storage`: نگه‌داری چند تنظیم ساده (در صورت نیاز)
- `host_permissions`:  
  - `https://app.snapp.taxi/*` برای خواندن تاریخچه سفرها  
  - `https://api.nobitex.ir/*`, `https://apiv2.nobitex.ir/*` برای دریافت قیمت‌ها

> **دانلود** (permissions: `downloads`) لازم نیست؛ ذخیره‌سازی تصویر با `<a download>` انجام می‌شود.

---

## ساختار فایل‌ها
- `manifest.json` — پیکربندی افزونه (MV3)
- `background.js` — سرویس‌ورکر
- `content.js` — خواندن/پارس تاریخچهٔ سفرهای اسنپ
- `price-provider.js` — دریافت قیمت‌ها (Nobitex)
- `usd-calc.js` — محاسبات سناریو USDT
- `btc-calc.js` — محاسبات سناریو BTC
- `ui-skin.js` — رابط کاربری مودال، نمودار، ذخیرهٔ تصویر و اشتراک‌گذاری

> فایل‌های اضافی مثل `snapper-download.js` یا `style.css` نیاز نیستند و حذف شده‌اند.

---

## بروزرسانی
1. نسخهٔ جدید را از GitHub دانلود و **Extract** کنید.
2. در `chrome://extensions` روی **Reload** افزونه بزنید (یا پوشهٔ جدید را مجدد Load کنید).

---

## رفع اشکال (Troubleshooting)
- **مودال دیده نمی‌شود**: مطمئن شوید داخل `https://app.snapp.taxi/` هستید و وارد اکانت شده‌اید. بعد صفحه را رفرش کنید.
- **محاسبه انجام نمی‌شود**: یک‌بار روی **شروع محاسبه** بزنید و صبر کنید تا «سفرها» خوانده شود؛ سپس محاسبات USDT/BTC انجام می‌شود.

---

## پرسش‌های رایج (FAQ)

**۱)  آیا این افزونه داده‌ای به جایی می‌فرستد؟**  
خیر؛ همه‌چیز **لوکال در مرورگر شما** انجام می‌شود (به جز درخواست قیمت به API صرافی).

**۳) خروجی تصویر کجاست؟**  
با زدن **ذخیره تصویر**، یک فایل PNG/JPG دانلود می‌شود.

---

## لایسنس
MIT

---

## سپاس
این پروژه با کمک **ChatGPT** و **Claude AI** توسعه و مرتب‌سازی شده ❤️
